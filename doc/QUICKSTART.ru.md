# Краткое руководство

Это руководство поможет вам быстро начать работу с репозиторием Seranov для Kodi и плагинами-службами.

## Установка

### Установка репозитория

1. **Скачайте аддон репозитория:**
   - Перейдите в [releases](https://github.com/seranov/seranov-kodi/releases) или в директорию `repo`
   - Скачайте `repository.seranov-1.0.0.zip`

2. **Установите в Kodi:**
   - Откройте Kodi
   - Перейдите в **Настройки** (значок шестеренки) → **Дополнения**
   - Нажмите **Установить из файла zip**
   - Укажите путь к скачанному файлу `repository.seranov-1.0.0.zip`
   - Дождитесь уведомления "Дополнение установлено"

3. **Просмотр доступных аддонов:**
   - Перейдите в **Настройки** → **Дополнения** → **Установить из репозитория**
   - Выберите **Seranov's Kodi Repository**
   - Просмотрите категории для поиска доступных аддонов

### Установка отдельных плагинов-служб

Если вы хотите установить плагин-службу без репозитория:

1. Скачайте zip-файл плагина-службы (например, `service.seranov.nfoscanner-1.0.0.zip`)
2. В Kodi перейдите в **Настройки** → **Дополнения** → **Установить из файла zip**
3. Укажите путь к скачанному zip-файлу и установите

## Использование плагинов-служб

### Служба сканирования NFO

Фоновая служба, которая автоматически сканирует видеопапки на наличие изменений метаданных.

**Конфигурация:**
1. Перейдите в **Настройки** → **Дополнения** → **Мои дополнения** → **Службы**
2. Выберите **NFO Scanner Service**
3. Нажмите **Настроить**
4. Настройте параметры:
   - **Интервал сканирования**: Как часто сканировать (в минутах, по умолчанию: 60)
   - **Количество потоков**: Количество потоков сканирования (1-4, по умолчанию: 1)
   - **Пауза при воспроизведении**: Приостанавливать сканирование во время воспроизведения видео
   - **Включить службу**: Включить или отключить сканер
   - **Сканировать сетевые источники**: Включать сетевые источники в сканирование

**Что она делает:**
- Сканирует видеопапки на наличие файлов movie.nfo
- Проверяет, новее ли movie.nfo, чем запись в базе данных Kodi
- Переимпортирует метаданные при обнаружении изменений
- Обрабатывает файлы category.nfo для управления жанрами
- Приостанавливается во время воспроизведения видео, чтобы избежать проблем с производительностью
- Приоритизирует папки на основе навигации пользователя

**Управление вручную:**
- Используйте кнопку **Запустить ручное сканирование** для немедленного запуска сканирования
- Используйте кнопку **Остановить сканирование** для остановки текущего сканирования
- Используйте кнопку **Очистить кэш** для сброса списка отсканированных папок

### Включение/отключение служб

Для включения или отключения службы:
1. Перейдите в **Настройки** → **Дополнения** → **Мои дополнения** → **Службы**
2. Выберите службу
3. Нажмите **Включить** или **Отключить**

### Просмотр логов служб

Для проверки правильности работы службы:

1. Включите **Логирование отладки**:
   - Перейдите в **Настройки** → **Система** → **Логирование**
   - Включите **Включить логирование отладки**

2. Просмотрите файл лога:
   - **Linux/macOS**: `~/.kodi/temp/kodi.log`
   - **Windows**: `%APPDATA%\Kodi\kodi.log`
   - **Android**: Используйте приложение для просмотра логов или adb

3. Ищите сообщения от вашей службы:
   ```
   [NFOScanner] NFO Scanner Service v1.0.0 started
   [NFOScanner] Scanning started
   ```

## Разработка собственного плагина-службы

Хотите создать свой плагин-службу? См. [CONTRIBUTING.ru.md](CONTRIBUTING.ru.md) для полного руководства.

### Быстрая настройка разработки

1. **Скопируйте шаблон:**
   ```bash
   cp -r service.seranov.template1 service.seranov.myplugin
   ```

2. **Обновите метаданные:**
   - Отредактируйте `addon.xml` с деталями вашего плагина
   - Обновите строки в `resources/language/resource.language.en_gb/strings.xml`

3. **Реализуйте вашу логику:**
   - Отредактируйте `service.py` для добавления вашей пользовательской функциональности

4. **Тестируйте локально:**
   - Скопируйте в директорию аддонов Kodi
   - Перезапустите Kodi
   - Включите службу

5. **Соберите репозиторий:**
   ```bash
   python3 scripts/generate_repo.py
   ```

## Устранение неполадок

### Служба не запускается

1. Проверьте, включена ли служба:
   - **Настройки** → **Дополнения** → **Мои дополнения** → **Службы** → Выберите вашу службу → **Включить**

2. Проверьте лог Kodi на наличие ошибок:
   - Включите логирование отладки
   - Ищите сообщения об ошибках, связанные с вашей службой

3. Проверьте зависимости:
   - Убедитесь, что все необходимые зависимости установлены

### Служба работает не так, как ожидается

1. Включите режим отладки в настройках службы
2. Проверьте лог Kodi на наличие подробных сообщений
3. Проверьте правильность ваших настроек
4. Протестируйте с простым действием для выявления проблемы

### Изменения не вступают в силу

1. Отключите службу
2. Перезапустите Kodi
3. Включите службу снова

## Обновления репозитория

Для обновления аддонов из репозитория:

1. Репозиторий автоматически проверяет обновления
2. Перейдите в **Настройки** → **Дополнения** → **Мои дополнения**
3. Выберите аддон с доступным обновлением
4. Нажмите **Обновить**

Или обновите все аддоны сразу:
- **Настройки** → **Дополнения** → **Обновления** → **Обновить все**

## Поддержка

По вопросам, проблемам или для участия в разработке:
- GitHub Issues: [https://github.com/seranov/seranov-kodi/issues](https://github.com/seranov/seranov-kodi/issues)
- Email: seranov@yandex.ru

## Ссылки

- [README.ru.md](README.ru.md) - Полная документация
- [CONTRIBUTING.ru.md](CONTRIBUTING.ru.md) - Руководство по разработке
- [Разработка аддонов для Kodi](https://kodi.wiki/view/Add-on_development)
