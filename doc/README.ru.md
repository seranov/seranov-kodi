# Репозиторий аддонов для Kodi

Этот репозиторий содержит несколько аддонов для Kodi и служит репозиторием для простой установки.

## Структура репозитория

```
├── plugin.video.random.recursive/  # Плагин случайного воспроизведения видео
├── context.screenshots/            # Контекстное меню для показа скриншотов
├── service.seranov.template1/      # Шаблон службы 1
├── service.seranov.template2/      # Шаблон службы 2
├── repository.seranov/             # Репозиторий аддонов
├── repo/                           # Сгенерированные файлы репозитория (addons.xml, zip)
└── scripts/                        # Скрипты сборки
```

## Доступные аддоны

### Репозиторий аддонов
- **ID**: `repository.seranov`
- **Назначение**: Установите его для получения автоматических обновлений всех аддонов из этого репозитория

### Плагин случайного рекурсивного воспроизведения видео
- **ID**: `plugin.video.random.recursive`
- **Назначение**: Воспроизведение видео в случайном порядке из директории с учетом вложенных папок
- **Возможности**:
  - Рекурсивное сканирование директорий для поиска видео файлов
  - Воспроизведение видео в случайном порядке
  - Интеграция с контекстным меню
  - Автоматическое управление плейлистом

### Всплывающие скриншоты
- **ID**: `context.screenshots`
- **Назначение**: Показ локальных скриншотов и изображений в режиме слайд-шоу
- **Возможности**:
  - Интеграция с контекстным меню для медиа элементов
  - Слайд-шоу локальных изображений
  - Поддержка файлов file_id.diz
  - Легкий и простой в использовании

### Шаблон службы 1
- **ID**: `service.seranov.template1`
- **Назначение**: Базовый шаблон службы с настраиваемыми интервалами
- **Возможности**:
  - Работает в фоновом режиме
  - Настраиваемый интервал проверки
  - Поддержка режима отладки
  - Поддержка уведомлений

### Шаблон службы 2
- **ID**: `service.seranov.template2`
- **Назначение**: Расширенный шаблон службы с мониторингом событий
- **Возможности**:
  - Мониторинг событий воспроизведения
  - Обработка уведомлений Kodi
  - Реагирование на изменения настроек
  - Настраиваемая обработка событий

## Установка

### Способ 1: Установка репозитория (рекомендуется)

1. Скачайте zip-файл репозитория: `repository.seranov-1.0.0.zip` из папки `repo`
2. В Kodi перейдите в **Дополнения** → **Установить из файла zip**
3. Укажите путь к скачанному zip-файлу и установите его
4. Перейдите в **Установить из репозитория** → **Seranov's Kodi Repository**
5. Установите любые аддоны, которые вам нужны, из репозитория

### Способ 2: Установка отдельного аддона

1. Скачайте конкретный zip-файл аддона из папки `repo`
2. В Kodi перейдите в **Дополнения** → **Установить из файла zip**
3. Укажите путь к скачанному zip-файлу и установите его

## Разработка

### Сборка репозитория

Для генерации файлов репозитория (addons.xml, MD5 контрольных сумм и zip-файлов):

```bash
python3 scripts/generate_repo.py
```

Это выполнит:
1. Создание zip-файлов для всех аддонов в директории `repo`
2. Генерацию `addons.xml` с метаданными всех аддонов
3. Генерацию файла контрольных сумм `addons.xml.md5`

### Добавление новых аддонов

1. Создайте новую директорию с ID аддона в качестве имени (например, `plugin.video.newaddon`, `service.seranov.newaddon`, `context.newaddon`)
2. Добавьте необходимые файлы:
   - `addon.xml` - метаданные аддона
   - `service.py`, `main.py` или `addon.py` - основной скрипт
   - `icon.png` - иконка аддона (рекомендуется 256x256)
   - `resources/settings.xml` - конфигурация настроек (опционально)
   - `resources/language/resource.language.en_gb/strings.po` - строки локализации
3. Запустите скрипт сборки для регенерации репозитория

Скрипт сборки автоматически обнаруживает все директории, начинающиеся с `plugin.`, `service.`, `context.` или `repository.`

### Структура плагина-службы

Каждый плагин-служба должен иметь:

```
service.addon.name/
├── addon.xml                    # Метаданные аддона
├── service.py                   # Основной скрипт службы
├── icon.png                     # Иконка аддона
├── fanart.jpg                   # Опциональный fanart
└── resources/
    ├── settings.xml             # Настройки аддона
    ├── language/
    │   └── resource.language.en_gb/
    │       └── strings.xml       # Английские строки
    └── lib/                     # Опциональные модули библиотеки
```

### Рекомендации по шаблонам служб

**Шаблон 1** подходит для:
- Периодических задач (проверка обновлений, мониторинг условий)
- Простых фоновых служб
- Служб, работающих по расписанию

**Шаблон 2** подходит для:
- Служб, управляемых событиями
- Мониторинга воспроизведения или системных событий
- Служб, которые должны реагировать на уведомления Kodi
- Более сложного взаимодействия с Kodi

## URL репозитория

Когда репозиторий размещен на GitHub, аддоны можно установить, добавив этот URL репозитория в Kodi:

```
https://raw.githubusercontent.com/seranov/kodi-play-random/main/repo/
```

## Лицензия

Лицензия MIT - См. файл LICENSE для деталей

## Автор

seranov (seranov@yandex.ru)
